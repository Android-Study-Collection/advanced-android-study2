---
title: Refactoring - Testing
type: slide
slideOptions: 
    center: false
---

# Refactoring - Testing

---

- 실패해야할 상황에서는 반드시 실패하게 만들자
- 자주 테스트하라. 작성 중인 코드는 최소한 몇 분 간격으로 테스트하고, 적어도 하루에 한 번은 전체 테스트를 돌려보자.
- 완벽하게 만드느라 테스트를 수행하지 못하느니, 불완전한 테스트라도 작성해 실행하는 게 낫다.
- 테스트의 목적은 어디까지나 현재 혹은 향후에 발생하는 버그를 찾는 데 있다.
- 일부 프로그래머들이 public 메서드를 빠짐없이 테스트하는 방식과 다르다.
- 간단한 메서드는 버그가 있을 확률이 크지 않기 때문에 테스트할 필요없기도 하고, 테스트 코드가 많아지면 필요한 테스트를 놓치기 쉽다.

---

- 테스트끼리 상호작용하게 하는 공유 픽스쳐는 필드로 빼서 before에서 init하거나 공유되지 않도록 짜야한다. (불변임이 확실하면 사용 OK)

---

- setup-exercise-verify
- given-when-then
- arrange-act-assert
- before에 공통적으로 세팅이 가능하다면, setup/given/arrange는 생략될 수 있다.
- 해체(teardown), 청소(cleanup)

---

- happy path(꽃길) 상황에 집중한 뒤, 경계 테스트를 작성하면 좋다.

---

- Assertion도 일종의 테스트이므로 따로 테스트를 작성할 필요는 없다

- 테스트에도 수확체감법칙(law of diminishing returns)이 적용되므로 위험하고 복잡한 부분에 집중하자.
- 테스트가 완벽한 보호막이 되진 않더라도, 안심하게 리팩토링할 수 있는 보호막이 되어준다.
- 테스트 용이성(Testability)를 아키텍쳐 평가기준으로 삼기도 한다.
- 버그리포트를 받으면, 가장 먼저 그 버그를 드러내는 단위 테스트부터 작성하자.
- 테스트 커버리지(Test Coverage)에 의존하지말자. 커버리지는 단순히 영역만 체크할 뿐. 품질을 보장하진 않는다.
- 테스트 때문에 개발속도가 느려진다면, 테스트를 과하게 하고 있는 건 아닌 지 의심해보자.
